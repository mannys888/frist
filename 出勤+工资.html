<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘˜å·¥æœˆå·¥èµ„ç®¡ç†ç³»ç»Ÿ - æ¯æ—¥å·¥èµ„è®¾ç½®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        h2 {
            color: #2c3e50;
            margin: 20px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4b6cb7;
        }
        
        h3 {
            color: #34495e;
            margin: 15px 0 10px;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        @media (max-width: 1000px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #444;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #4b6cb7;
            outline: none;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #4b6cb7;
            color: white;
        }
        
        .btn-primary:hover {
            background: #3a5699;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        th {
            background-color: #f8f9fa;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #eaeaea;
            white-space: nowrap;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #eaeaea;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .current-date {
            font-size: 1.1rem;
            margin-top: 5px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .date-header {
            background-color: #f1f5f9;
            padding: 10px 15px;
            font-weight: bold;
            color: #2c3e50;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .date-total {
            color: #4b6cb7;
        }
        
        .employee-row {
            border-left: 4px solid #3498db;
        }
        
        .salary-input {
            width: 90px;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: right;
        }
        
        .salary-input:focus {
            border-color: #4b6cb7;
            outline: none;
        }
        
        .daily-salary-input {
            width: 100px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: right;
        }
        
        .daily-salary-input:focus {
            border-color: #4b6cb7;
            outline: none;
        }
        
        .salary-paid {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .type-paid {
            background-color: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }
        
        .employee-summary {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .employee-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #4b6cb7;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .employee-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .employee-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .employee-salary {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.2rem;
        }
        
        .employee-workdays {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .record-actions {
            display: flex;
            gap: 5px;
        }
        
        .stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-box {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        
        .total-salary {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .avg-salary {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }
        
        .employee-count {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }
        
        .workday-count {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .stat-box h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: white;
        }
        
        .stat-box .amount {
            font-size: 1.8rem;
        }
        
        .date-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .date-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #eaeaea;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .date-item button {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .date-item button:hover {
            color: #c0392b;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.3s ease-out;
            display: flex;
            flex-direction: column;
            border-left: 5px solid #4b6cb7;
            background: white;
            max-width: 400px;
            z-index: 1000;
        }
        
        .notification.success {
            border-left-color: #2ecc71;
        }
        
        .notification.error {
            border-left-color: #e74c3c;
        }
        
        .notification.warning {
            border-left-color: #f39c12;
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .notification-title {
            font-weight: bold;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .tab-container {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        .tab.active {
            border-bottom: 3px solid #4b6cb7;
            font-weight: bold;
            color: #4b6cb7;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .salary-table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        .salary-table {
            min-width: 1000px;
        }
        
        .employee-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .employee-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .employee-checkbox input {
            width: auto;
        }
        
        .date-picker-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .date-picker-group input {
            flex: 1;
        }
        
        .salary-summary-table th, .salary-summary-table td {
            text-align: center;
        }
        
        .salary-summary-table .total-column {
            background-color: #f1f8ff;
            font-weight: bold;
        }
        
        /* æ–°å¢æ ·å¼ï¼šæ¯æ—¥å·¥èµ„è®¾ç½® */
        .daily-salary-container {
            margin-top: 20px;
        }
        
        .month-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .month-selector select, .month-selector input {
            width: auto;
        }
        
        .daily-salary-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        
        .day-cell {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #eaeaea;
        }
        
        .day-cell.weekend {
            background-color: #fef2f2;
        }
        
        .day-cell.today {
            background-color: #e8f4fd;
            border-color: #4b6cb7;
        }
        
        .day-number {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .day-salary-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }
        
        .day-name {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .batch-settings {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .batch-setting-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .batch-setting-group label {
            width: 120px;
            margin-bottom: 0;
        }
        
        .batch-setting-group input {
            flex: 1;
        }
        
        .weekday-label {
            display: inline-block;
            width: 60px;
            text-align: center;
            padding: 5px;
            background: #eaeaea;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .preset-salary-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .preset-salary-btn {
            padding: 8px 12px;
            background: #e8f4fd;
            border: 1px solid #4b6cb7;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .preset-salary-btn:hover {
            background: #d4e7fa;
        }
        
        /* æ—¥å†è§†å›¾æ ·å¼ */
        .calendar-view {
            margin-top: 20px;
        }
        
        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        .calendar-day-header {
            padding: 10px;
            background: #f1f5f9;
            border-radius: 4px;
        }
        
        .calendar-body {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            min-height: 100px;
            padding: 10px;
            background: white;
            border: 1px solid #eaeaea;
            border-radius: 4px;
            position: relative;
        }
        
        .calendar-day.weekend {
            background: #fef2f2;
        }
        
        .calendar-day.today {
            border-color: #4b6cb7;
            background: #e8f4fd;
        }
        
        .calendar-day-number {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .calendar-day-salary {
            font-size: 0.9rem;
            color: #27ae60;
            margin-bottom: 5px;
        }
        
        .calendar-day-employees {
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        
        .calendar-day-empty {
            background: #f9f9f9;
            border: 1px dashed #ddd;
        }
        
        /* å‘˜å·¥å‡ºå‹¤æ ‡è®° */
        .attendance-marker {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 2px;
            background-color: #2ecc71;
        }
        
        .attendance-marker.absent {
            background-color: #e74c3c;
        }
        
        /* å·¥èµ„åˆ†æå›¾è¡¨ */
        .salary-chart-container {
            height: 300px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-top: 20px;
            padding: 20px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
        }
        
        .salary-bar {
            width: 40px;
            background: linear-gradient(to top, #4b6cb7, #3498db);
            border-radius: 4px 4px 0 0;
            position: relative;
            text-align: center;
        }
        
        .salary-bar-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        
        .salary-bar-value {
            position: absolute;
            top: -25px;
            left: 0;
            right: 0;
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ“… å‘˜å·¥æœˆå·¥èµ„ç®¡ç†ç³»ç»Ÿ</h1>
        <div class="current-date" id="currentDate">æ­£åœ¨åŠ è½½æ—¥æœŸ...</div>
    </header>
    
    <div class="tab-container">
        <div class="tab active" id="tabDailySalary">ğŸ’° æ¯æ—¥å·¥èµ„è®¾ç½®</div>
        <div class="tab" id="tabAttendance">ğŸ“ å‘˜å·¥å‡ºå‹¤è®°å½•</div>
        <div class="tab" id="tabSummary">ğŸ“Š å·¥èµ„æ±‡æ€»</div>
        <div class="tab" id="tabCalendar">ğŸ“… æ—¥å†è§†å›¾</div>
        <div class="tab" id="tabManage">âš™ï¸ ç³»ç»Ÿç®¡ç†</div>
    </div>
    
    <!-- æ¯æ—¥å·¥èµ„è®¾ç½®é¡µé¢ -->
    <div class="tab-content active" id="tabDailySalaryContent">
        <div class="container">
            <div class="left-column">
                <div class="card">
                    <h2>ğŸ“… é€‰æ‹©æœˆä»½</h2>
                    <div class="month-selector">
                        <select id="monthSelect">
                            <!-- æœˆä»½é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                        <select id="yearSelect">
                            <!-- å¹´ä»½é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                        <button class="btn btn-primary" id="applyMonth">åº”ç”¨</button>
                        <button class="btn" id="currentMonth">æœ¬æœˆ</button>
                    </div>
                    
                    <div class="batch-settings">
                        <h3>æ‰¹é‡è®¾ç½®å·¥èµ„</h3>
                        <div class="batch-setting-group">
                            <label>å·¥ä½œæ—¥å·¥èµ„ï¼š</label>
                            <input type="number" id="weekdaySalary" min="0" step="1" placeholder="å¦‚ï¼š160">
                        </div>
                        <div class="batch-setting-group">
                            <label>å‘¨æœ«å·¥èµ„ï¼š</label>
                            <input type="number" id="weekendSalary" min="0" step="1" placeholder="å¦‚ï¼š200">
                        </div>
                        <div class="batch-setting-group">
                            <label>æ³•å®šèŠ‚å‡æ—¥ï¼š</label>
                            <input type="number" id="holidaySalary" min="0" step="1" placeholder="å¦‚ï¼š300">
                        </div>
                        <div class="actions">
                            <button class="btn btn-primary" id="applyBatchSettings">åº”ç”¨æ‰¹é‡è®¾ç½®</button>
                        </div>
                        
                        <div class="preset-salary-buttons">
                            <button class="preset-salary-btn" data-salary="150">150å…ƒ/å¤©</button>
                            <button class="preset-salary-btn" data-salary="160">160å…ƒ/å¤©</button>
                            <button class="preset-salary-btn" data-salary="180">180å…ƒ/å¤©</button>
                            <button class="preset-salary-btn" data-salary="200">200å…ƒ/å¤©</button>
                            <button class="preset-salary-btn" data-salary="250">250å…ƒ/å¤©</button>
                        </div>
                    </div>
                    
                    <div class="daily-salary-container">
                        <h3 id="currentMonthTitle">2023å¹´10æœˆ æ¯æ—¥å·¥èµ„è®¾ç½®</h3>
                        <div class="daily-salary-grid" id="dailySalaryGrid">
                            <!-- æ¯æ—¥å·¥èµ„è®¾ç½®ç½‘æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <h2>ğŸ“‹ å‘˜å·¥æ¯æ—¥å·¥èµ„é¢„è§ˆ</h2>
                    <div class="salary-table-container">
                        <table class="salary-table" id="dailySalaryPreviewTable">
                            <!-- æ¯æ—¥å·¥èµ„é¢„è§ˆè¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“ˆ æœ¬æœˆå·¥èµ„åˆ†æ</h2>
                    <div id="monthSalaryStats">
                        <div class="stats">
                            <div class="stat-box total-salary">
                                <h3>æœ¬æœˆæ€»å·¥èµ„</h3>
                                <div class="amount" id="monthTotalSalary">0</div>
                            </div>
                            <div class="stat-box avg-salary">
                                <h3>å¹³å‡æ—¥å·¥èµ„</h3>
                                <div class="amount" id="avgDailySalary">0</div>
                            </div>
                            <div class="stat-box workday-count">
                                <h3>å·¥ä½œæ—¥æ•°</h3>
                                <div class="amount" id="workdayCount">0</div>
                            </div>
                            <div class="stat-box employee-count">
                                <h3>å‘˜å·¥æ•°é‡</h3>
                                <div class="amount" id="employeeCount">10</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="salary-chart-container" id="salaryChartContainer">
                        <!-- å·¥èµ„å›¾è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å‘˜å·¥å‡ºå‹¤è®°å½•é¡µé¢ -->
    <div class="tab-content" id="tabAttendanceContent">
        <div class="container">
            <div class="left-column">
                <div class="card">
                    <h2>ğŸ‘¥ å‘˜å·¥å‡ºå‹¤è®°å½•</h2>
                    <div class="form-group">
                        <label>é€‰æ‹©æ—¥æœŸ</label>
                        <input type="date" id="attendanceDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label>é€‰æ‹©å‘˜å·¥ï¼ˆå¯é€‰ï¼Œä¸é€‰åˆ™ä¸ºæ‰€æœ‰å‘˜å·¥ï¼‰</label>
                        <div class="employee-selector" id="attendanceEmployeeSelector">
                            <!-- å‘˜å·¥é€‰æ‹©å™¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>æ‰¹é‡è®¾ç½®å‡ºå‹¤</label>
                        <select id="batchAttendance">
                            <option value="present">å…¨éƒ¨å‡ºå‹¤</option>
                            <option value="absent">å…¨éƒ¨ç¼ºå‹¤</option>
                            <option value="custom">è‡ªå®šä¹‰</option>
                        </select>
                    </div>
                    
                    <div class="actions">
                        <button class="btn btn-primary" id="saveAttendance">
                            ğŸ’¾ ä¿å­˜å‡ºå‹¤è®°å½•
                        </button>
                        <button class="btn btn-warning" id="clearAttendance">
                            ğŸ§¹ æ¸…é™¤ä»Šæ—¥è®°å½•
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“‹ å‘˜å·¥åˆ—è¡¨</h2>
                    <div class="employee-summary" id="attendanceEmployeeSummary">
                        <!-- å‘˜å·¥å‡ºå‹¤æ‘˜è¦å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <h2>ğŸ“… æœ¬æœˆå‡ºå‹¤æ—¥å†</h2>
                    <div id="attendanceCalendar">
                        <!-- å‡ºå‹¤æ—¥å†å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“Š å‡ºå‹¤ç»Ÿè®¡</h2>
                    <div class="salary-table-container">
                        <table class="salary-table">
                            <thead>
                                <tr>
                                    <th>å‘˜å·¥</th>
                                    <th>å‡ºå‹¤å¤©æ•°</th>
                                    <th>ç¼ºå‹¤å¤©æ•°</th>
                                    <th>å‡ºå‹¤ç‡</th>
                                </tr>
                            </thead>
                            <tbody id="attendanceStatsTable">
                                <!-- å‡ºå‹¤ç»Ÿè®¡è¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å·¥èµ„æ±‡æ€»é¡µé¢ -->
    <div class="tab-content" id="tabSummaryContent">
        <div class="container">
            <div class="left-column">
                <div class="card">
                    <h2>ğŸ“Š å‘˜å·¥å·¥èµ„æ±‡æ€»</h2>
                    <div class="salary-table-container">
                        <table class="salary-summary-table">
                            <thead>
                                <tr>
                                    <th>å‘˜å·¥</th>
                                    <th>å‡ºå‹¤å¤©æ•°</th>
                                    <th>æ€»å·¥èµ„</th>
                                    <th>å¹³å‡æ—¥å·¥èµ„</th>
                                </tr>
                            </thead>
                            <tbody id="employeeSalarySummaryTable">
                                <!-- å‘˜å·¥å·¥èµ„æ±‡æ€»è¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“… æ¯æ—¥å·¥èµ„æ±‡æ€»</h2>
                    <div class="salary-table-container">
                        <table class="salary-summary-table">
                            <thead>
                                <tr>
                                    <th>æ—¥æœŸ</th>
                                    <th>å‡ºå‹¤å‘˜å·¥æ•°</th>
                                    <th>å½“æ—¥æ€»å·¥èµ„</th>
                                    <th>å¹³å‡å·¥èµ„</th>
                                </tr>
                            </thead>
                            <tbody id="dailySalarySummaryTable">
                                <!-- æ¯æ—¥å·¥èµ„æ±‡æ€»è¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <h2>ğŸ’° è¯¦ç»†å·¥èµ„è¡¨æ ¼</h2>
                    <div class="salary-table-container">
                        <table class="salary-table" id="detailedSalaryTable">
                            <!-- è¯¦ç»†å·¥èµ„è¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ—¥å†è§†å›¾é¡µé¢ -->
    <div class="tab-content" id="tabCalendarContent">
        <div class="container">
            <div class="left-column">
                <div class="card">
                    <h2>ğŸ“… å·¥èµ„æ—¥å†è§†å›¾</h2>
                    <div class="month-selector">
                        <select id="calendarMonthSelect">
                            <!-- æœˆä»½é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                        <select id="calendarYearSelect">
                            <!-- å¹´ä»½é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                        <button class="btn btn-primary" id="applyCalendarMonth">åº”ç”¨</button>
                    </div>
                    
                    <div class="calendar-view" id="calendarView">
                        <!-- æ—¥å†è§†å›¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <h2>ğŸ“ˆ å·¥èµ„è¶‹åŠ¿å›¾</h2>
                    <div class="salary-chart-container" id="salaryTrendChart">
                        <!-- å·¥èµ„è¶‹åŠ¿å›¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ“‹ æœ¬æœˆå…³é”®æ•°æ®</h2>
                    <div class="stats">
                        <div class="stat-box total-salary">
                            <h3>æœ¬æœˆæ€»æ”¯å‡º</h3>
                            <div class="amount" id="calendarTotalSalary">0</div>
                        </div>
                        <div class="stat-box avg-salary">
                            <h3>äººå‡å·¥èµ„</h3>
                            <div class="amount" id="calendarAvgSalary">0</div>
                        </div>
                        <div class="stat-box workday-count">
                            <h3>æ€»å‡ºå‹¤å¤©æ•°</h3>
                            <div class="amount" id="calendarAttendanceDays">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç³»ç»Ÿç®¡ç†é¡µé¢ -->
    <div class="tab-content" id="tabManageContent">
        <div class="container">
            <div class="left-column">
                <div class="card">
                    <h2>ğŸ’¾ æ•°æ®ç®¡ç†</h2>
                    <div class="actions">
                        <button class="btn btn-success" id="saveDataBtn">
                            ğŸ’¾ ä¿å­˜æ‰€æœ‰æ•°æ®
                        </button>
                        <button class="btn btn-primary" id="loadDataBtn">
                            ğŸ“‚ åŠ è½½æ•°æ®
                        </button>
                        <button class="btn btn-success" id="exportDataBtn">
                            ğŸ“¥ å¯¼å‡ºæ•°æ®ä¸ºCSV
                        </button>
                        <button class="btn btn-warning" id="importDataBtn">
                            ğŸ“¤ å¯¼å…¥CSVæ•°æ®
                        </button>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h3>ç³»ç»Ÿä¿¡æ¯</h3>
                        <p><strong>è®°å½•æœˆä»½ï¼š</strong> <span id="currentMonthData">2023å¹´10æœˆ</span></p>
                        <p><strong>å‘˜å·¥æ•°é‡ï¼š</strong> <span id="systemEmployeeCount">10</span> äºº</p>
                        <p><strong>æ•°æ®å¤§å°ï¼š</strong> <span id="dataSize">0 KB</span></p>
                        <p><strong>æœ€åä¿å­˜ï¼š</strong> <span id="lastSave">æš‚æ— </span></p>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ”„ é‡ç½®é€‰é¡¹</h2>
                    <div class="actions">
                        <button class="btn btn-warning" id="resetCurrentMonth">
                            ğŸ”„ é‡ç½®æœ¬æœˆæ•°æ®
                        </button>
                        <button class="btn btn-danger" id="resetAllData">
                            ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®
                        </button>
                    </div>
                    <p style="margin-top: 10px; color: #7f8c8d; font-size: 0.9rem;">
                        æ³¨æ„ï¼šæ¸…é™¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œï¼
                    </p>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <h2>ğŸ‘¥ å‘˜å·¥ç®¡ç†</h2>
                    <div id="employeeManagementList">
                        <!-- å‘˜å·¥ç®¡ç†åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="card">
                    <h2>âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
                    <div class="form-group">
                        <label>é»˜è®¤å·¥ä½œæ—¥å·¥èµ„</label>
                        <input type="number" id="defaultWeekdaySalary" min="0" step="1" value="160">
                    </div>
                    <div class="form-group">
                        <label>é»˜è®¤å‘¨æœ«å·¥èµ„</label>
                        <input type="number" id="defaultWeekendSalary" min="0" step="1" value="200">
                    </div>
                    <div class="form-group">
                        <label>é»˜è®¤èŠ‚å‡æ—¥å·¥èµ„</label>
                        <input type="number" id="defaultHolidaySalary" min="0" step="1" value="300">
                    </div>
                    <div class="actions">
                        <button class="btn btn-primary" id="saveSettings">ä¿å­˜è®¾ç½®</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>å‘˜å·¥æœˆå·¥èµ„ç®¡ç†ç³»ç»Ÿ &copy; 2023 | å¯è®¾ç½®æ•´ä¸ªæœˆæ¯å¤©ä¸åŒçš„å·¥èµ„æ ‡å‡†ï¼Œè®°å½•å‘˜å·¥å‡ºå‹¤ï¼Œè‡ªåŠ¨è®¡ç®—æ€»å·¥èµ„</p>
    </footer>
    
    <!-- æ–‡ä»¶å¯¼å…¥è¾“å…¥æ¡†ï¼ˆéšè—ï¼‰ -->
    <input type="file" id="importFileInput" accept=".csv" style="display: none;">
    
    <script>
        // åˆå§‹åŒ–å˜é‡
        let dailySalaries = {}; // æ¯æ—¥å·¥èµ„è®¾ç½® {æ—¥æœŸ: å·¥èµ„}
        let attendanceRecords = {}; // å‡ºå‹¤è®°å½• {æ—¥æœŸ: {å‘˜å·¥: true/false}}
        let employees = []; // å‘˜å·¥åˆ—è¡¨
        let currentMonth = new Date().getMonth(); // å½“å‰æœˆä»½ï¼ˆ0-11ï¼‰
        let currentYear = new Date().getFullYear(); // å½“å‰å¹´ä»½
        
        // é»˜è®¤å‘˜å·¥åˆ—è¡¨ï¼ˆ10ä¸ªå‘˜å·¥ï¼‰
        const defaultEmployees = [
            "å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", 
            "åˆ˜ä¸ƒ", "é™ˆå…«", "æ¨ä¹", "å´å",
            "é’±åä¸€", "å­™åäºŒ"
        ];
        
        // æ³•å®šèŠ‚å‡æ—¥ï¼ˆç¤ºä¾‹ï¼Œå¯æ‰©å±•ï¼‰
        const holidays = [
            "2023-10-01", "2023-10-02", "2023-10-03", // å›½åº†èŠ‚
            "2023-10-04", "2023-10-05", "2023-10-06"
        ];
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®å½“å‰æ—¥æœŸ
            const currentDateElement = document.getElementById('currentDate');
            const today = new Date();
            const formattedDate = today.toLocaleDateString('zh-CN', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
            currentDateElement.textContent = formattedDate;
            
            // åˆå§‹åŒ–å‘˜å·¥åˆ—è¡¨
            initEmployees();
            
            // åˆå§‹åŒ–æœˆä»½å’Œå¹´ä»½é€‰æ‹©å™¨
            initMonthYearSelectors();
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            loadData();
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            setupEventListeners();
            
            // åˆå§‹åŒ–å‘˜å·¥é€‰æ‹©å™¨
            initEmployeeSelectors();
            
            // æ›´æ–°æ¯æ—¥å·¥èµ„è®¾ç½®ç•Œé¢
            updateDailySalaryGrid();
            
            // æ›´æ–°å‡ºå‹¤æ—¥å†
            updateAttendanceCalendar();
            
            // è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢
            setupTabs();
            
            // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
            updateSystemInfo();
        });
        
        // è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.id.replace('tab', '');
                    
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾
                    this.classList.add('active');
                    document.getElementById(`tab${tabId}Content`).classList.add('active');
                    
                    // æ ¹æ®æ ‡ç­¾é¡µæ›´æ–°å†…å®¹
                    if (tabId === 'DailySalary') {
                        updateDailySalaryGrid();
                        updateDailySalaryPreview();
                        updateMonthSalaryStats();
                    } else if (tabId === 'Attendance') {
                        updateAttendanceEmployeeSummary();
                        updateAttendanceStats();
                        updateAttendanceCalendar();
                    } else if (tabId === 'Summary') {
                        updateSalarySummaryTables();
                    } else if (tabId === 'Calendar') {
                        updateCalendarView();
                        updateCalendarStats();
                    } else if (tabId === 'Manage') {
                        updateEmployeeManagementList();
                        updateSystemInfo();
                    }
                });
            });
        }
        
        // åˆå§‹åŒ–å‘˜å·¥åˆ—è¡¨
        function initEmployees() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½å‘˜å·¥åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å‘˜å·¥
            const savedEmployees = localStorage.getItem('employeeList');
            if (savedEmployees) {
                employees = JSON.parse(savedEmployees);
            } else {
                employees = defaultEmployees.map(name => ({
                    name: name,
                    active: true,
                    color: getRandomColor()
                }));
                saveEmployees();
            }
        }
        
        // ä¿å­˜å‘˜å·¥åˆ—è¡¨åˆ°æœ¬åœ°å­˜å‚¨
        function saveEmployees() {
            localStorage.setItem('employeeList', JSON.stringify(employees));
        }
        
        // åˆå§‹åŒ–æœˆä»½å’Œå¹´ä»½é€‰æ‹©å™¨
        function initMonthYearSelectors() {
            const monthSelect = document.getElementById('monthSelect');
            const yearSelect = document.getElementById('yearSelect');
            const calendarMonthSelect = document.getElementById('calendarMonthSelect');
            const calendarYearSelect = document.getElementById('calendarYearSelect');
            
            // æ¸…ç©ºç°æœ‰é€‰é¡¹
            monthSelect.innerHTML = '';
            calendarMonthSelect.innerHTML = '';
            yearSelect.innerHTML = '';
            calendarYearSelect.innerHTML = '';
            
            // æ·»åŠ æœˆä»½é€‰é¡¹
            const months = [
                '1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ',
                '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'
            ];
            
            months.forEach((month, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = month;
                if (index === currentMonth) option.selected = true;
                monthSelect.appendChild(option.cloneNode(true));
                calendarMonthSelect.appendChild(option.cloneNode(true));
            });
            
            // æ·»åŠ å¹´ä»½é€‰é¡¹ï¼ˆå½“å‰å¹´ä»½å‰å5å¹´ï¼‰
            const currentYear = new Date().getFullYear();
            for (let year = currentYear - 5; year <= currentYear + 5; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'å¹´';
                if (year === currentYear) option.selected = true;
                yearSelect.appendChild(option.cloneNode(true));
                calendarYearSelect.appendChild(option.cloneNode(true));
            }
        }
        
        // åˆå§‹åŒ–å‘˜å·¥é€‰æ‹©å™¨
        function initEmployeeSelectors() {
            const attendanceEmployeeSelector = document.getElementById('attendanceEmployeeSelector');
            attendanceEmployeeSelector.innerHTML = '';
            
            employees.forEach((employee, index) => {
                const checkbox = document.createElement('div');
                checkbox.className = 'employee-checkbox';
                checkbox.innerHTML = `
                    <input type="checkbox" id="attendanceEmployee${index}" checked>
                    <label for="attendanceEmployee${index}">${employee.name}</label>
                `;
                attendanceEmployeeSelector.appendChild(checkbox);
            });
            
            // è®¾ç½®å‡ºå‹¤æ—¥æœŸä¸ºä»Šå¤©
            document.getElementById('attendanceDate').valueAsDate = new Date();
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æœˆä»½åº”ç”¨æŒ‰é’®
            document.getElementById('applyMonth').addEventListener('click', function() {
                const monthSelect = document.getElementById('monthSelect');
                const yearSelect = document.getElementById('yearSelect');
                currentMonth = parseInt(monthSelect.value);
                currentYear = parseInt(yearSelect.value);
                updateDailySalaryGrid();
                updateDailySalaryPreview();
                updateMonthSalaryStats();
                showNotification('success', 'æœˆä»½å·²åˆ‡æ¢', `å·²åˆ‡æ¢åˆ°${currentYear}å¹´${currentMonth + 1}æœˆ`);
            });
            
            // æœ¬æœˆæŒ‰é’®
            document.getElementById('currentMonth').addEventListener('click', function() {
                const today = new Date();
                currentMonth = today.getMonth();
                currentYear = today.getFullYear();
                
                document.getElementById('monthSelect').value = currentMonth;
                document.getElementById('yearSelect').value = currentYear;
                
                updateDailySalaryGrid();
                updateDailySalaryPreview();
                updateMonthSalaryStats();
                showNotification('success', 'è¿”å›æœ¬æœˆ', `å·²åˆ‡æ¢åˆ°${currentYear}å¹´${currentMonth + 1}æœˆ`);
            });
            
            // åº”ç”¨æ‰¹é‡è®¾ç½®æŒ‰é’®
            document.getElementById('applyBatchSettings').addEventListener('click', applyBatchSalarySettings);
            
            // é¢„è®¾å·¥èµ„æŒ‰é’®
            document.querySelectorAll('.preset-salary-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const salary = parseInt(this.getAttribute('data-salary'));
                    document.getElementById('weekdaySalary').value = salary;
                    document.getElementById('weekendSalary').value = Math.round(salary * 1.5);
                    document.getElementById('holidaySalary').value = Math.round(salary * 2);
                    
                    showNotification('info', 'é¢„è®¾å·²åŠ è½½', `å·¥ä½œæ—¥: ${salary}å…ƒ, å‘¨æœ«: ${Math.round(salary * 1.5)}å…ƒ, èŠ‚å‡æ—¥: ${Math.round(salary * 2)}å…ƒ`);
                });
            });
            
            // ä¿å­˜å‡ºå‹¤è®°å½•æŒ‰é’®
            document.getElementById('saveAttendance').addEventListener('click', saveAttendance);
            
            // æ¸…é™¤ä»Šæ—¥è®°å½•æŒ‰é’®
            document.getElementById('clearAttendance').addEventListener('click', clearTodayAttendance);
            
            // ä¿å­˜æ•°æ®æŒ‰é’®
            document.getElementById('saveDataBtn').addEventListener('click', saveAllData);
            
            // åŠ è½½æ•°æ®æŒ‰é’®
            document.getElementById('loadDataBtn').addEventListener('click', loadData);
            
            // å¯¼å‡ºæ•°æ®æŒ‰é’®
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            
            // å¯¼å…¥æ•°æ®æŒ‰é’®
            document.getElementById('importDataBtn').addEventListener('click', function() {
                document.getElementById('importFileInput').click();
            });
            
            // æ–‡ä»¶å¯¼å…¥äº‹ä»¶
            document.getElementById('importFileInput').addEventListener('change', importData);
            
            // é‡ç½®æœ¬æœˆæ•°æ®æŒ‰é’®
            document.getElementById('resetCurrentMonth').addEventListener('click', resetCurrentMonthData);
            
            // é‡ç½®æ‰€æœ‰æ•°æ®æŒ‰é’®
            document.getElementById('resetAllData').addEventListener('click', resetAllData);
            
            // ä¿å­˜è®¾ç½®æŒ‰é’®
            document.getElementById('saveSettings').addEventListener('click', saveSystemSettings);
            
            // æ—¥å†æœˆä»½åº”ç”¨æŒ‰é’®
            document.getElementById('applyCalendarMonth').addEventListener('click', function() {
                const monthSelect = document.getElementById('calendarMonthSelect');
                const yearSelect = document.getElementById('calendarYearSelect');
                currentMonth = parseInt(monthSelect.value);
                currentYear = parseInt(yearSelect.value);
                updateCalendarView();
                updateCalendarStats();
            });
            
            // æ‰¹é‡å‡ºå‹¤è®¾ç½®
            document.getElementById('batchAttendance').addEventListener('change', function() {
                const value = this.value;
                if (value === 'present' || value === 'absent') {
                    const checkboxes = document.querySelectorAll('#attendanceEmployeeSelector input[type="checkbox"]');
                    checkboxes.forEach(checkbox => {
                        checkbox.checked = (value === 'present');
                    });
                }
            });
        }
        
        // è·å–æŒ‡å®šæœˆä»½çš„å¤©æ•°
        function getDaysInMonth(year, month) {
            return new Date(year, month + 1, 0).getDate();
        }
        
        // è·å–æŒ‡å®šæ—¥æœŸçš„æ˜ŸæœŸå‡ ï¼ˆ0=å‘¨æ—¥, 1=å‘¨ä¸€, ..., 6=å‘¨å…­ï¼‰
        function getDayOfWeek(year, month, day) {
            return new Date(year, month, day).getDay();
        }
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºå‘¨æœ«
        function isWeekend(year, month, day) {
            const dayOfWeek = getDayOfWeek(year, month, day);
            return dayOfWeek === 0 || dayOfWeek === 6; // å‘¨æ—¥æˆ–å‘¨å…­
        }
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºèŠ‚å‡æ—¥
        function isHoliday(dateString) {
            return holidays.includes(dateString);
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸå­—ç¬¦ä¸²
        function formatDate(year, month, day) {
            return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        }
        
        // æ›´æ–°æ¯æ—¥å·¥èµ„è®¾ç½®ç½‘æ ¼
        function updateDailySalaryGrid() {
            const dailySalaryGrid = document.getElementById('dailySalaryGrid');
            const currentMonthTitle = document.getElementById('currentMonthTitle');
            
            // æ›´æ–°æœˆä»½æ ‡é¢˜
            currentMonthTitle.textContent = `${currentYear}å¹´${currentMonth + 1}æœˆ æ¯æ—¥å·¥èµ„è®¾ç½®`;
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            
            let html = '';
            
            // ç”Ÿæˆæ¯å¤©å•å…ƒæ ¼
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const dayOfWeek = getDayOfWeek(currentYear, currentMonth, day);
                const isWeekendDay = isWeekend(currentYear, currentMonth, day);
                const isHolidayDay = isHoliday(dateString);
                const isToday = isCurrentMonth && day === today.getDate();
                
                // è·å–å½“å‰è®¾ç½®çš„å·¥èµ„
                const currentSalary = dailySalaries[dateString] || 0;
                
                // æ˜ŸæœŸå‡ åç§°
                const dayNames = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
                const dayName = dayNames[dayOfWeek];
                
                // ç¡®å®šCSSç±»
                let cellClass = 'day-cell';
                if (isWeekendDay) cellClass += ' weekend';
                if (isToday) cellClass += ' today';
                
                html += `
                <div class="${cellClass}" data-date="${dateString}">
                    <div class="day-name">${dayName}</div>
                    <div class="day-number">${day}</div>
                    <input type="number" 
                           class="day-salary-input" 
                           value="${currentSalary}" 
                           min="0" 
                           step="1"
                           placeholder="å·¥èµ„"
                           data-date="${dateString}"
                           onchange="updateDailySalary('${dateString}', this.value)">
                </div>
                `;
            }
            
            dailySalaryGrid.innerHTML = html;
            
            // æ›´æ–°æ¯æ—¥å·¥èµ„é¢„è§ˆ
            updateDailySalaryPreview();
            
            // æ›´æ–°æœ¬æœˆå·¥èµ„ç»Ÿè®¡
            updateMonthSalaryStats();
        }
        
        // æ›´æ–°æ¯æ—¥å·¥èµ„
        function updateDailySalary(dateString, salary) {
            dailySalaries[dateString] = parseFloat(salary) || 0;
            
            // æ›´æ–°æœ¬åœ°å­˜å‚¨
            saveDailySalaries();
            
            // æ›´æ–°é¢„è§ˆå’Œç»Ÿè®¡
            updateDailySalaryPreview();
            updateMonthSalaryStats();
            
            // æ˜¾ç¤ºé€šçŸ¥
            const formattedDate = new Date(dateString).toLocaleDateString('zh-CN', {
                month: 'short',
                day: 'numeric'
            });
            showNotification('success', 'å·¥èµ„å·²æ›´æ–°', `${formattedDate}çš„å·¥èµ„è®¾ç½®ä¸º${salary}å…ƒ`);
        }
        
        // åº”ç”¨æ‰¹é‡å·¥èµ„è®¾ç½®
        function applyBatchSalarySettings() {
            const weekdaySalary = parseInt(document.getElementById('weekdaySalary').value) || 0;
            const weekendSalary = parseInt(document.getElementById('weekendSalary').value) || 0;
            const holidaySalary = parseInt(document.getElementById('holidaySalary').value) || 0;
            
            if (weekdaySalary === 0 && weekendSalary === 0 && holidaySalary === 0) {
                showNotification('warning', 'è®¾ç½®å¤±è´¥', 'è¯·è‡³å°‘è®¾ç½®ä¸€ç§å·¥èµ„æ ‡å‡†');
                return;
            }
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // è®¾ç½®æ¯å¤©çš„å·¥èµ„
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const isWeekendDay = isWeekend(currentYear, currentMonth, day);
                const isHolidayDay = isHoliday(dateString);
                
                if (isHolidayDay && holidaySalary > 0) {
                    dailySalaries[dateString] = holidaySalary;
                } else if (isWeekendDay && weekendSalary > 0) {
                    dailySalaries[dateString] = weekendSalary;
                } else if (weekdaySalary > 0) {
                    dailySalaries[dateString] = weekdaySalary;
                }
            }
            
            // æ›´æ–°æœ¬åœ°å­˜å‚¨
            saveDailySalaries();
            
            // æ›´æ–°ç•Œé¢
            updateDailySalaryGrid();
            updateDailySalaryPreview();
            updateMonthSalaryStats();
            
            // æ˜¾ç¤ºé€šçŸ¥
            showNotification('success', 'æ‰¹é‡è®¾ç½®æˆåŠŸ', `å·²åº”ç”¨æ‰¹é‡å·¥èµ„è®¾ç½®åˆ°${currentYear}å¹´${currentMonth + 1}æœˆ`);
        }
        
        // æ›´æ–°æ¯æ—¥å·¥èµ„é¢„è§ˆè¡¨æ ¼
        function updateDailySalaryPreview() {
            const table = document.getElementById('dailySalaryPreviewTable');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // åˆ›å»ºè¡¨æ ¼
            let html = `
            <thead>
                <tr>
                    <th>æ—¥æœŸ</th>
                    <th>æ˜ŸæœŸ</th>
                    <th>å·¥èµ„(å…ƒ)</th>
                    <th>ç±»å‹</th>
                </tr>
            </thead>
            <tbody>
            `;
            
            // æ˜ŸæœŸå‡ åç§°
            const dayNames = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            
            // æ·»åŠ æ¯å¤©çš„è¡Œ
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const dayOfWeek = getDayOfWeek(currentYear, currentMonth, day);
                const isWeekendDay = isWeekend(currentYear, currentMonth, day);
                const isHolidayDay = isHoliday(dateString);
                
                // è·å–å·¥èµ„
                const salary = dailySalaries[dateString] || 0;
                
                // ç¡®å®šç±»å‹
                let type = 'å·¥ä½œæ—¥';
                let typeClass = '';
                if (isHolidayDay) {
                    type = 'èŠ‚å‡æ—¥';
                    typeClass = 'type-paid';
                } else if (isWeekendDay) {
                    type = 'å‘¨æœ«';
                    typeClass = 'type-paid';
                }
                
                html += `
                <tr>
                    <td>${currentMonth + 1}æœˆ${day}æ—¥</td>
                    <td>æ˜ŸæœŸ${dayNames[dayOfWeek]}</td>
                    <td>${salary}</td>
                    <td><span class="salary-paid ${typeClass}">${type}</span></td>
                </tr>
                `;
            }
            
            html += `</tbody>`;
            table.innerHTML = html;
        }
        
        // æ›´æ–°æœ¬æœˆå·¥èµ„ç»Ÿè®¡
        function updateMonthSalaryStats() {
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            let totalSalary = 0;
            let workdayCount = 0;
            
            // è®¡ç®—æ€»å·¥èµ„å’Œå·¥ä½œæ—¥æ•°
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const salary = dailySalaries[dateString] || 0;
                
                if (salary > 0) {
                    totalSalary += salary;
                    workdayCount++;
                }
            }
            
            // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
            document.getElementById('monthTotalSalary').textContent = totalSalary;
            document.getElementById('workdayCount').textContent = workdayCount;
            
            // è®¡ç®—å¹³å‡æ—¥å·¥èµ„
            const avgDailySalary = workdayCount > 0 ? Math.round(totalSalary / workdayCount) : 0;
            document.getElementById('avgDailySalary').textContent = avgDailySalary;
            
            // æ›´æ–°å‘˜å·¥æ•°é‡
            const activeEmployees = employees.filter(e => e.active).length;
            document.getElementById('employeeCount').textContent = activeEmployees;
            
            // æ›´æ–°å·¥èµ„å›¾è¡¨
            updateSalaryChart();
        }
        
        // æ›´æ–°å·¥èµ„å›¾è¡¨
        function updateSalaryChart() {
            const chartContainer = document.getElementById('salaryChartContainer');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // åªæ˜¾ç¤ºå‰10å¤©æˆ–å…¨éƒ¨å¤©æ•°ï¼ˆå¦‚æœå¤©æ•°è¾ƒå°‘ï¼‰
            const maxDaysToShow = Math.min(daysInMonth, 10);
            
            // è®¡ç®—æœ€å¤§å·¥èµ„å€¼ï¼Œç”¨äºæ¯”ä¾‹è®¡ç®—
            let maxSalary = 0;
            for (let day = 1; day <= maxDaysToShow; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const salary = dailySalaries[dateString] || 0;
                if (salary > maxSalary) maxSalary = salary;
            }
            
            // å¦‚æœæœ€å¤§å·¥èµ„ä¸º0ï¼Œè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼é¿å…é™¤é›¶é”™è¯¯
            if (maxSalary === 0) maxSalary = 1;
            
            let html = '';
            
            // ç”ŸæˆæŸ±çŠ¶å›¾
            for (let day = 1; day <= maxDaysToShow; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const salary = dailySalaries[dateString] || 0;
                
                // è®¡ç®—æŸ±çŠ¶å›¾é«˜åº¦ï¼ˆæœ€å¤§250pxï¼‰
                const barHeight = (salary / maxSalary) * 200;
                
                html += `
                <div class="salary-bar" style="height: ${barHeight}px;">
                    <div class="salary-bar-value">${salary}</div>
                    <div class="salary-bar-label">${day}æ—¥</div>
                </div>
                `;
            }
            
            chartContainer.innerHTML = html;
        }
        
        // ä¿å­˜å‡ºå‹¤è®°å½•
        function saveAttendance() {
            const attendanceDate = document.getElementById('attendanceDate').value;
            
            if (!attendanceDate) {
                showNotification('error', 'ä¿å­˜å¤±è´¥', 'è¯·é€‰æ‹©æ—¥æœŸ');
                return;
            }
            
            // åˆå§‹åŒ–è¯¥æ—¥æœŸçš„å‡ºå‹¤è®°å½•
            if (!attendanceRecords[attendanceDate]) {
                attendanceRecords[attendanceDate] = {};
            }
            
            // è·å–é€‰ä¸­çš„å‘˜å·¥
            const selectedEmployees = [];
            document.querySelectorAll('#attendanceEmployeeSelector input[type="checkbox"]').forEach((checkbox, index) => {
                if (checkbox.checked) {
                    selectedEmployees.push(employees[index].name);
                }
            });
            
            // å¦‚æœæ²¡é€‰å‘˜å·¥ï¼Œé»˜è®¤é€‰æ‹©æ‰€æœ‰å‘˜å·¥
            const targetEmployees = selectedEmployees.length > 0 ? selectedEmployees : employees.map(e => e.name);
            
            // è®¾ç½®å‡ºå‹¤çŠ¶æ€
            targetEmployees.forEach(employeeName => {
                attendanceRecords[attendanceDate][employeeName] = true;
            });
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveAttendanceRecords();
            
            // æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
            const formattedDate = new Date(attendanceDate).toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            showNotification('success', 'å‡ºå‹¤è®°å½•å·²ä¿å­˜', `${formattedDate}çš„å‡ºå‹¤è®°å½•å·²ä¿å­˜`);
            
            // æ›´æ–°å‡ºå‹¤æ—¥å†å’Œç»Ÿè®¡
            updateAttendanceCalendar();
            updateAttendanceStats();
            updateAttendanceEmployeeSummary();
        }
        
        // æ¸…é™¤ä»Šæ—¥å‡ºå‹¤è®°å½•
        function clearTodayAttendance() {
            const today = new Date().toISOString().split('T')[0];
            
            if (attendanceRecords[today]) {
                delete attendanceRecords[today];
                saveAttendanceRecords();
                showNotification('success', 'è®°å½•å·²æ¸…é™¤', 'ä»Šæ—¥å‡ºå‹¤è®°å½•å·²æ¸…é™¤');
                
                // æ›´æ–°ç•Œé¢
                updateAttendanceCalendar();
                updateAttendanceStats();
                updateAttendanceEmployeeSummary();
            } else {
                showNotification('info', 'æ— è®°å½•', 'ä»Šæ—¥æ— å‡ºå‹¤è®°å½•');
            }
        }
        
        // æ›´æ–°å‡ºå‹¤æ—¥å†
        function updateAttendanceCalendar() {
            const attendanceCalendar = document.getElementById('attendanceCalendar');
            
            // è·å–å½“å‰æœˆä»½çš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            
            // åˆ›å»ºæ—¥å†å¤´éƒ¨
            let html = `
            <div class="calendar-header">
                <div class="calendar-day-header">æ—¥</div>
                <div class="calendar-day-header">ä¸€</div>
                <div class="calendar-day-header">äºŒ</div>
                <div class="calendar-day-header">ä¸‰</div>
                <div class="calendar-day-header">å››</div>
                <div class="calendar-day-header">äº”</div>
                <div class="calendar-day-header">å…­</div>
            </div>
            <div class="calendar-body">
            `;
            
            // è·å–ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ 
            const firstDayOfWeek = getDayOfWeek(currentYear, currentMonth, 1);
            
            // æ·»åŠ ç©ºç™½å•å…ƒæ ¼ï¼ˆå¦‚æœç¬¬ä¸€å¤©ä¸æ˜¯å‘¨æ—¥ï¼‰
            for (let i = 0; i < firstDayOfWeek; i++) {
                html += '<div class="calendar-day calendar-day-empty"></div>';
            }
            
            // æ·»åŠ æ¯å¤©å•å…ƒæ ¼
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const isWeekendDay = isWeekend(currentYear, currentMonth, day);
                const isToday = isCurrentMonth && day === today.getDate();
                
                // ç¡®å®šCSSç±»
                let dayClass = 'calendar-day';
                if (isWeekendDay) dayClass += ' weekend';
                if (isToday) dayClass += ' today';
                
                // è·å–è¯¥æ—¥æœŸçš„å·¥èµ„
                const salary = dailySalaries[dateString] || 0;
                
                // è·å–è¯¥æ—¥æœŸçš„å‡ºå‹¤å‘˜å·¥æ•°
                const attendanceCount = attendanceRecords[dateString] ? 
                    Object.keys(attendanceRecords[dateString]).length : 0;
                
                html += `
                <div class="${dayClass}" data-date="${dateString}">
                    <div class="calendar-day-number">${day}</div>
                    <div class="calendar-day-salary">${salary > 0 ? salary + 'å…ƒ' : 'æœªè®¾ç½®'}</div>
                    <div class="calendar-day-employees">
                        ${attendanceCount > 0 ? attendanceCount + 'äººå‡ºå‹¤' : 'æ— å‡ºå‹¤è®°å½•'}
                    </div>
                </div>
                `;
            }
            
            html += `</div>`;
            attendanceCalendar.innerHTML = html;
        }
        
        // æ›´æ–°å‘˜å·¥å‡ºå‹¤æ‘˜è¦
        function updateAttendanceEmployeeSummary() {
            const employeeSummary = document.getElementById('attendanceEmployeeSummary');
            
            let html = '';
            
            employees.forEach(employee => {
                if (!employee.active) return;
                
                const employeeName = employee.name;
                
                // è®¡ç®—è¯¥å‘˜å·¥çš„å‡ºå‹¤å¤©æ•°
                let attendanceDays = 0;
                for (const date in attendanceRecords) {
                    if (attendanceRecords[date][employeeName]) {
                        attendanceDays++;
                    }
                }
                
                html += `
                <div class="employee-item">
                    <div class="employee-name">${employeeName}</div>
                    <div class="employee-salary">${attendanceDays} å¤©</div>
                    <div class="employee-workdays">å‡ºå‹¤å¤©æ•°</div>
                </div>
                `;
            });
            
            employeeSummary.innerHTML = html;
        }
        
        // æ›´æ–°å‡ºå‹¤ç»Ÿè®¡è¡¨æ ¼
        function updateAttendanceStats() {
            const tableBody = document.getElementById('attendanceStatsTable');
            
            let html = '';
            
            employees.forEach(employee => {
                if (!employee.active) return;
                
                const employeeName = employee.name;
                
                // è®¡ç®—è¯¥å‘˜å·¥çš„å‡ºå‹¤å’Œç¼ºå‹¤å¤©æ•°
                let attendanceDays = 0;
                let absentDays = 0;
                
                // è·å–è¯¥æœˆçš„å¤©æ•°
                const daysInMonth = getDaysInMonth(currentYear, currentMonth);
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateString = formatDate(currentYear, currentMonth, day);
                    
                    if (attendanceRecords[dateString]) {
                        if (attendanceRecords[dateString][employeeName]) {
                            attendanceDays++;
                        } else {
                            // å¦‚æœè¯¥æ—¥æœŸæœ‰å‡ºå‹¤è®°å½•ä½†è¯¥å‘˜å·¥æ²¡æœ‰è®°å½•ï¼Œåˆ™è§†ä¸ºç¼ºå‹¤
                            absentDays++;
                        }
                    }
                }
                
                // è®¡ç®—å‡ºå‹¤ç‡
                const totalDays = attendanceDays + absentDays;
                const attendanceRate = totalDays > 0 ? Math.round((attendanceDays / totalDays) * 100) : 0;
                
                html += `
                <tr>
                    <td>${employeeName}</td>
                    <td>${attendanceDays}</td>
                    <td>${absentDays}</td>
                    <td>${attendanceRate}%</td>
                </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        // æ›´æ–°å·¥èµ„æ±‡æ€»è¡¨æ ¼
        function updateSalarySummaryTables() {
            updateEmployeeSalarySummary();
            updateDailySalarySummary();
            updateDetailedSalaryTable();
        }
        
        // æ›´æ–°å‘˜å·¥å·¥èµ„æ±‡æ€»è¡¨æ ¼
        function updateEmployeeSalarySummary() {
            const tableBody = document.getElementById('employeeSalarySummaryTable');
            
            let html = '';
            let grandTotalSalary = 0;
            
            employees.forEach(employee => {
                if (!employee.active) return;
                
                const employeeName = employee.name;
                
                // è®¡ç®—è¯¥å‘˜å·¥çš„æ€»å·¥èµ„å’Œå‡ºå‹¤å¤©æ•°
                let totalSalary = 0;
                let attendanceDays = 0;
                
                // éå†æ‰€æœ‰æ—¥æœŸ
                for (const dateString in dailySalaries) {
                    const salary = dailySalaries[dateString];
                    if (salary > 0 && attendanceRecords[dateString] && attendanceRecords[dateString][employeeName]) {
                        totalSalary += salary;
                        attendanceDays++;
                    }
                }
                
                grandTotalSalary += totalSalary;
                
                // è®¡ç®—å¹³å‡æ—¥å·¥èµ„
                const avgDailySalary = attendanceDays > 0 ? Math.round(totalSalary / attendanceDays) : 0;
                
                html += `
                <tr>
                    <td>${employeeName}</td>
                    <td>${attendanceDays}</td>
                    <td class="total-column">${totalSalary}</td>
                    <td>${avgDailySalary}</td>
                </tr>
                `;
            });
            
            // æ·»åŠ æ€»è®¡è¡Œ
            html += `
            <tr>
                <td><strong>æ€»è®¡</strong></td>
                <td>-</td>
                <td class="total-column"><strong>${grandTotalSalary}</strong></td>
                <td>-</td>
            </tr>
            `;
            
            tableBody.innerHTML = html;
        }
        
        // æ›´æ–°æ¯æ—¥å·¥èµ„æ±‡æ€»è¡¨æ ¼
        function updateDailySalarySummary() {
            const tableBody = document.getElementById('dailySalarySummaryTable');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            let html = '';
            let monthTotalSalary = 0;
            
            // æ˜ŸæœŸå‡ åç§°
            const dayNames = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const dayOfWeek = getDayOfWeek(currentYear, currentMonth, day);
                
                // è·å–è¯¥æ—¥æœŸçš„å·¥èµ„
                const dailySalary = dailySalaries[dateString] || 0;
                
                // è·å–è¯¥æ—¥æœŸçš„å‡ºå‹¤å‘˜å·¥æ•°
                const attendanceCount = attendanceRecords[dateString] ? 
                    Object.keys(attendanceRecords[dateString]).length : 0;
                
                // è®¡ç®—å½“æ—¥æ€»å·¥èµ„
                const dailyTotalSalary = dailySalary * attendanceCount;
                monthTotalSalary += dailyTotalSalary;
                
                // è®¡ç®—å¹³å‡å·¥èµ„
                const avgSalary = attendanceCount > 0 ? dailySalary : 0;
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const formattedDate = `${currentMonth + 1}æœˆ${day}æ—¥ (æ˜ŸæœŸ${dayNames[dayOfWeek]})`;
                
                html += `
                <tr>
                    <td>${formattedDate}</td>
                    <td>${attendanceCount}</td>
                    <td class="total-column">${dailyTotalSalary}</td>
                    <td>${avgSalary}</td>
                </tr>
                `;
            }
            
            // æ·»åŠ æ€»è®¡è¡Œ
            html += `
            <tr>
                <td><strong>æœ¬æœˆæ€»è®¡</strong></td>
                <td>-</td>
                <td class="total-column"><strong>${monthTotalSalary}</strong></td>
                <td>-</td>
            </tr>
            `;
            
            tableBody.innerHTML = html;
        }
        
        // æ›´æ–°è¯¦ç»†å·¥èµ„è¡¨æ ¼
        function updateDetailedSalaryTable() {
            const table = document.getElementById('detailedSalaryTable');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // åˆ›å»ºè¡¨æ ¼
            let html = `
            <thead>
                <tr>
                    <th>å‘˜å·¥</th>
            `;
            
            // æ·»åŠ æ—¥æœŸåˆ—
            for (let day = 1; day <= daysInMonth; day++) {
                html += `<th>${day}æ—¥</th>`;
            }
            
            html += `
                    <th>æ€»è®¡</th>
                </tr>
            </thead>
            <tbody>
            `;
            
            // ä¸ºæ¯ä¸ªå‘˜å·¥æ·»åŠ è¡Œ
            employees.forEach(employee => {
                if (!employee.active) return;
                
                const employeeName = employee.name;
                let rowTotal = 0;
                
                html += `<tr><td><strong>${employeeName}</strong></td>`;
                
                // ä¸ºæ¯ä¸ªæ—¥æœŸæ·»åŠ å•å…ƒæ ¼
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateString = formatDate(currentYear, currentMonth, day);
                    const dailySalary = dailySalaries[dateString] || 0;
                    
                    // æ£€æŸ¥å‘˜å·¥æ˜¯å¦å‡ºå‹¤
                    const isPresent = attendanceRecords[dateString] && attendanceRecords[dateString][employeeName];
                    const salary = isPresent ? dailySalary : 0;
                    
                    rowTotal += salary;
                    
                    html += `<td>${salary > 0 ? salary : '-'}</td>`;
                }
                
                html += `<td class="total-column">${rowTotal}</td></tr>`;
            });
            
            // æ·»åŠ æ€»è®¡è¡Œ
            html += `<tr><td><strong>æ¯æ—¥æ€»è®¡</strong></td>`;
            
            let grandTotal = 0;
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const dailySalary = dailySalaries[dateString] || 0;
                const attendanceCount = attendanceRecords[dateString] ? 
                    Object.keys(attendanceRecords[dateString]).length : 0;
                
                const dailyTotal = dailySalary * attendanceCount;
                grandTotal += dailyTotal;
                
                html += `<td class="total-column">${dailyTotal}</td>`;
            }
            
            html += `<td class="total-column"><strong>${grandTotal}</strong></td></tr>`;
            html += `</tbody>`;
            
            table.innerHTML = html;
        }
        
        // æ›´æ–°æ—¥å†è§†å›¾
        function updateCalendarView() {
            const calendarView = document.getElementById('calendarView');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            
            // åˆ›å»ºæ—¥å†å¤´éƒ¨
            let html = `
            <div class="calendar-header">
                <div class="calendar-day-header">æ—¥</div>
                <div class="calendar-day-header">ä¸€</div>
                <div class="calendar-day-header">äºŒ</div>
                <div class="calendar-day-header">ä¸‰</div>
                <div class="calendar-day-header">å››</div>
                <div class="calendar-day-header">äº”</div>
                <div class="calendar-day-header">å…­</div>
            </div>
            <div class="calendar-body">
            `;
            
            // è·å–ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ 
            const firstDayOfWeek = getDayOfWeek(currentYear, currentMonth, 1);
            
            // æ·»åŠ ç©ºç™½å•å…ƒæ ¼ï¼ˆå¦‚æœç¬¬ä¸€å¤©ä¸æ˜¯å‘¨æ—¥ï¼‰
            for (let i = 0; i < firstDayOfWeek; i++) {
                html += '<div class="calendar-day calendar-day-empty"></div>';
            }
            
            // æ·»åŠ æ¯å¤©å•å…ƒæ ¼
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const isWeekendDay = isWeekend(currentYear, currentMonth, day);
                const isToday = isCurrentMonth && day === today.getDate();
                
                // ç¡®å®šCSSç±»
                let dayClass = 'calendar-day';
                if (isWeekendDay) dayClass += ' weekend';
                if (isToday) dayClass += ' today';
                
                // è·å–è¯¥æ—¥æœŸçš„å·¥èµ„
                const salary = dailySalaries[dateString] || 0;
                
                // è·å–è¯¥æ—¥æœŸçš„å‡ºå‹¤å‘˜å·¥
                const attendanceEmployees = attendanceRecords[dateString] ? 
                    Object.keys(attendanceRecords[dateString]) : [];
                
                // æ˜¾ç¤ºå‰3ä¸ªå‡ºå‹¤å‘˜å·¥
                let employeesHtml = '';
                attendanceEmployees.slice(0, 3).forEach(employee => {
                    employeesHtml += `<div class="attendance-marker" title="${employee}"></div>`;
                });
                
                if (attendanceEmployees.length > 3) {
                    employeesHtml += `<div style="font-size: 0.7rem;">+${attendanceEmployees.length - 3}äºº</div>`;
                }
                
                html += `
                <div class="${dayClass}" data-date="${dateString}">
                    <div class="calendar-day-number">${day}</div>
                    <div class="calendar-day-salary">${salary > 0 ? salary + 'å…ƒ' : 'æœªè®¾ç½®'}</div>
                    <div class="calendar-day-employees">
                        ${attendanceEmployees.length > 0 ? 
                            `${attendanceEmployees.length}äººå‡ºå‹¤` : 
                            'æ— å‡ºå‹¤'}
                    </div>
                    ${employeesHtml}
                </div>
                `;
            }
            
            html += `</div>`;
            calendarView.innerHTML = html;
        }
        
        // æ›´æ–°æ—¥å†ç»Ÿè®¡
        function updateCalendarStats() {
            // è®¡ç®—æœ¬æœˆæ€»æ”¯å‡º
            let totalSalary = 0;
            let totalAttendanceDays = 0;
            
            // éå†æ‰€æœ‰æ—¥æœŸ
            for (const dateString in dailySalaries) {
                const salary = dailySalaries[dateString];
                if (salary > 0 && attendanceRecords[dateString]) {
                    const attendanceCount = Object.keys(attendanceRecords[dateString]).length;
                    totalSalary += salary * attendanceCount;
                    totalAttendanceDays += attendanceCount;
                }
            }
            
            // è®¡ç®—äººå‡å·¥èµ„
            const activeEmployees = employees.filter(e => e.active).length;
            const avgSalary = activeEmployees > 0 ? Math.round(totalSalary / activeEmployees) : 0;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('calendarTotalSalary').textContent = totalSalary;
            document.getElementById('calendarAvgSalary').textContent = avgSalary;
            document.getElementById('calendarAttendanceDays').textContent = totalAttendanceDays;
            
            // æ›´æ–°å·¥èµ„è¶‹åŠ¿å›¾
            updateSalaryTrendChart();
        }
        
        // æ›´æ–°å·¥èµ„è¶‹åŠ¿å›¾
        function updateSalaryTrendChart() {
            const chartContainer = document.getElementById('salaryTrendChart');
            
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // è®¡ç®—æ¯å¤©çš„æ€»å·¥èµ„æ”¯å‡º
            const dailyTotals = [];
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                const salary = dailySalaries[dateString] || 0;
                const attendanceCount = attendanceRecords[dateString] ? 
                    Object.keys(attendanceRecords[dateString]).length : 0;
                
                dailyTotals.push(salary * attendanceCount);
            }
            
            // è®¡ç®—æœ€å¤§æ”¯å‡ºå€¼ï¼Œç”¨äºæ¯”ä¾‹è®¡ç®—
            let maxTotal = 0;
            dailyTotals.forEach(total => {
                if (total > maxTotal) maxTotal = total;
            });
            
            // å¦‚æœæœ€å¤§æ”¯å‡ºä¸º0ï¼Œè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼é¿å…é™¤é›¶é”™è¯¯
            if (maxTotal === 0) maxTotal = 1;
            
            let html = '';
            
            // ç”ŸæˆæŸ±çŠ¶å›¾ï¼ˆæœ€å¤šæ˜¾ç¤º15å¤©ï¼‰
            const daysToShow = Math.min(daysInMonth, 15);
            for (let day = 1; day <= daysToShow; day++) {
                const total = dailyTotals[day - 1] || 0;
                
                // è®¡ç®—æŸ±çŠ¶å›¾é«˜åº¦ï¼ˆæœ€å¤§250pxï¼‰
                const barHeight = (total / maxTotal) * 200;
                
                html += `
                <div class="salary-bar" style="height: ${barHeight}px;">
                    <div class="salary-bar-value">${total > 0 ? total : ''}</div>
                    <div class="salary-bar-label">${day}æ—¥</div>
                </div>
                `;
            }
            
            chartContainer.innerHTML = html;
        }
        
        // æ›´æ–°å‘˜å·¥ç®¡ç†åˆ—è¡¨
        function updateEmployeeManagementList() {
            const container = document.getElementById('employeeManagementList');
            
            let html = '<table style="width: 100%;"><thead><tr><th>å‘˜å·¥</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr></thead><tbody>';
            
            employees.forEach((employee, index) => {
                html += `
                <tr>
                    <td>${employee.name}</td>
                    <td>${employee.active ? 'å¯ç”¨' : 'ç¦ç”¨'}</td>
                    <td>
                        <button class="btn btn-sm ${employee.active ? 'btn-warning' : 'btn-success'}" 
                                onclick="toggleEmployeeStatus(${index})">
                            ${employee.active ? 'ç¦ç”¨' : 'å¯ç”¨'}
                        </button>
                    </td>
                </tr>
                `;
            });
            
            html += '</tbody></table>';
            
            container.innerHTML = html;
        }
        
        // åˆ‡æ¢å‘˜å·¥çŠ¶æ€
        function toggleEmployeeStatus(index) {
            employees[index].active = !employees[index].active;
            saveEmployees();
            updateEmployeeManagementList();
            
            const status = employees[index].active ? 'å¯ç”¨' : 'ç¦ç”¨';
            showNotification('success', 'çŠ¶æ€å·²æ›´æ–°', `å‘˜å·¥${employees[index].name}å·²${status}`);
        }
        
        // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
        function updateSystemInfo() {
            // æ›´æ–°å½“å‰æœˆä»½æ˜¾ç¤º
            document.getElementById('currentMonthData').textContent = `${currentYear}å¹´${currentMonth + 1}æœˆ`;
            
            // æ›´æ–°å‘˜å·¥æ•°é‡
            const activeEmployees = employees.filter(e => e.active).length;
            document.getElementById('systemEmployeeCount').textContent = activeEmployees;
            
            // è®¡ç®—æ•°æ®å¤§å°
            const data = JSON.stringify({
                dailySalaries,
                attendanceRecords,
                employees
            });
            const dataSize = new Blob([data]).size;
            document.getElementById('dataSize').textContent = (dataSize / 1024).toFixed(2) + ' KB';
            
            // è·å–æœ€åä¿å­˜æ—¶é—´
            const lastSave = localStorage.getItem('lastSaveTime');
            if (lastSave) {
                const lastSaveDate = new Date(lastSave);
                document.getElementById('lastSave').textContent = lastSaveDate.toLocaleString('zh-CN');
            } else {
                document.getElementById('lastSave').textContent = 'æš‚æ— ';
            }
        }
        
        // ä¿å­˜æ‰€æœ‰æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveAllData() {
            saveDailySalaries();
            saveAttendanceRecords();
            saveEmployees();
            
            // ä¿å­˜æœ€åä¿å­˜æ—¶é—´
            localStorage.setItem('lastSaveTime', new Date().toISOString());
            
            showNotification('success', 'ä¿å­˜æˆåŠŸ', 'æ‰€æœ‰æ•°æ®å·²æˆåŠŸä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨');
            updateSystemInfo();
        }
        
        // ä¿å­˜æ¯æ—¥å·¥èµ„è®¾ç½®
        function saveDailySalaries() {
            localStorage.setItem('dailySalaries', JSON.stringify(dailySalaries));
        }
        
        // ä¿å­˜å‡ºå‹¤è®°å½•
        function saveAttendanceRecords() {
            localStorage.setItem('attendanceRecords', JSON.stringify(attendanceRecords));
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
        function loadData() {
            const savedDailySalaries = localStorage.getItem('dailySalaries');
            const savedAttendanceRecords = localStorage.getItem('attendanceRecords');
            
            if (savedDailySalaries) {
                dailySalaries = JSON.parse(savedDailySalaries);
            }
            
            if (savedAttendanceRecords) {
                attendanceRecords = JSON.parse(savedAttendanceRecords);
            }
            
            // åŠ è½½ç³»ç»Ÿè®¾ç½®
            const defaultWeekdaySalary = localStorage.getItem('defaultWeekdaySalary');
            const defaultWeekendSalary = localStorage.getItem('defaultWeekendSalary');
            const defaultHolidaySalary = localStorage.getItem('defaultHolidaySalary');
            
            if (defaultWeekdaySalary) {
                document.getElementById('defaultWeekdaySalary').value = defaultWeekdaySalary;
            }
            
            if (defaultWeekendSalary) {
                document.getElementById('defaultWeekendSalary').value = defaultWeekendSalary;
            }
            
            if (defaultHolidaySalary) {
                document.getElementById('defaultHolidaySalary').value = defaultHolidaySalary;
            }
            
            // æ›´æ–°ç•Œé¢
            updateDailySalaryGrid();
            updateDailySalaryPreview();
            updateMonthSalaryStats();
            updateAttendanceCalendar();
            updateAttendanceStats();
            updateAttendanceEmployeeSummary();
            updateSalarySummaryTables();
            updateCalendarView();
            updateCalendarStats();
            
            showNotification('success', 'åŠ è½½æˆåŠŸ', 'æ•°æ®å·²ä»æœ¬åœ°å­˜å‚¨åŠ è½½');
            updateSystemInfo();
        }
        
        // å¯¼å‡ºæ•°æ®ä¸ºCSV
        function exportData() {
            // åˆ›å»ºå·¥èµ„æ•°æ®CSV
            let salaryCsvContent = "data:text/csv;charset=utf-8,\uFEFF";
            salaryCsvContent += "æ—¥æœŸ,å·¥èµ„æ ‡å‡†(å…ƒ)\n";
            
            for (const date in dailySalaries) {
                const salary = dailySalaries[date];
                salaryCsvContent += `"${date}",${salary}\n`;
            }
            
            // åˆ›å»ºå‡ºå‹¤æ•°æ®CSV
            let attendanceCsvContent = "data:text/csv;charset=utf-8,\uFEFF";
            attendanceCsvContent += "æ—¥æœŸ,å‘˜å·¥,å‡ºå‹¤\n";
            
            for (const date in attendanceRecords) {
                for (const employee in attendanceRecords[date]) {
                    attendanceCsvContent += `"${date}","${employee}","æ˜¯"\n`;
                }
            }
            
            // åˆ›å»ºå·¥èµ„è®¡ç®—CSV
            let calculationCsvContent = "data:text/csv;charset=utf-8,\uFEFF";
            calculationCsvContent += "å‘˜å·¥";
            
            // æ·»åŠ æ—¥æœŸåˆ—
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            for (let day = 1; day <= daysInMonth; day++) {
                calculationCsvContent += `,"${day}æ—¥"`;
            }
            calculationCsvContent += ",æ€»è®¡\n";
            
            // ä¸ºæ¯ä¸ªå‘˜å·¥æ·»åŠ è¡Œ
            employees.forEach(employee => {
                if (!employee.active) return;
                
                calculationCsvContent += `"${employee.name}"`;
                let rowTotal = 0;
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateString = formatDate(currentYear, currentMonth, day);
                    const dailySalary = dailySalaries[dateString] || 0;
                    
                    // æ£€æŸ¥å‘˜å·¥æ˜¯å¦å‡ºå‹¤
                    const isPresent = attendanceRecords[dateString] && attendanceRecords[dateString][employee.name];
                    const salary = isPresent ? dailySalary : 0;
                    
                    rowTotal += salary;
                    calculationCsvContent += `,${salary}`;
                }
                
                calculationCsvContent += `,${rowTotal}\n`;
            });
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const exportDate = new Date().toISOString().split('T')[0];
            
            // ä¸‹è½½å·¥èµ„æ•°æ®
            const salaryLink = document.createElement("a");
            salaryLink.setAttribute("href", encodeURI(salaryCsvContent));
            salaryLink.setAttribute("download", `æ¯æ—¥å·¥èµ„æ ‡å‡†_${exportDate}.csv`);
            document.body.appendChild(salaryLink);
            salaryLink.click();
            document.body.removeChild(salaryLink);
            
            // ä¸‹è½½å‡ºå‹¤æ•°æ®
            const attendanceLink = document.createElement("a");
            attendanceLink.setAttribute("href", encodeURI(attendanceCsvContent));
            attendanceLink.setAttribute("download", `å‘˜å·¥å‡ºå‹¤è®°å½•_${exportDate}.csv`);
            document.body.appendChild(attendanceLink);
            attendanceLink.click();
            document.body.removeChild(attendanceLink);
            
            // ä¸‹è½½å·¥èµ„è®¡ç®—æ•°æ®
            const calculationLink = document.createElement("a");
            calculationLink.setAttribute("href", encodeURI(calculationCsvContent));
            calculationLink.setAttribute("download", `å‘˜å·¥å·¥èµ„è®¡ç®—_${currentYear}å¹´${currentMonth + 1}æœˆ.csv`);
            document.body.appendChild(calculationLink);
            calculationLink.click();
            document.body.removeChild(calculationLink);
            
            showNotification('success', 'å¯¼å‡ºæˆåŠŸ', 'æ•°æ®å·²æˆåŠŸå¯¼å‡ºä¸ºCSVæ–‡ä»¶');
        }
        
        // å¯¼å…¥CSVæ•°æ®
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const contents = e.target.result;
                const lines = contents.split('\n');
                
                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                if (lines[0].includes('æ—¥æœŸ,å·¥èµ„æ ‡å‡†')) {
                    // å¯¼å…¥å·¥èµ„æ•°æ®
                    for (let i = 1; i < lines.length; i++) {
                        const line = lines[i].trim();
                        if (!line) continue;
                        
                        const columns = line.split(',').map(col => col.replace(/"/g, ''));
                        if (columns.length >= 2) {
                            const date = columns[0];
                            const salary = parseFloat(columns[1]) || 0;
                            dailySalaries[date] = salary;
                        }
                    }
                    saveDailySalaries();
                    showNotification('success', 'å¯¼å…¥æˆåŠŸ', 'å·¥èµ„æ•°æ®å·²å¯¼å…¥');
                    
                } else if (lines[0].includes('æ—¥æœŸ,å‘˜å·¥,å‡ºå‹¤')) {
                    // å¯¼å…¥å‡ºå‹¤æ•°æ®
                    for (let i = 1; i < lines.length; i++) {
                        const line = lines[i].trim();
                        if (!line) continue;
                        
                        const columns = line.split(',').map(col => col.replace(/"/g, ''));
                        if (columns.length >= 3) {
                            const date = columns[0];
                            const employee = columns[1];
                            const attendance = columns[2];
                            
                            if (!attendanceRecords[date]) {
                                attendanceRecords[date] = {};
                            }
                            
                            if (attendance === 'æ˜¯' || attendance === '1' || attendance === 'true') {
                                attendanceRecords[date][employee] = true;
                            }
                        }
                    }
                    saveAttendanceRecords();
                    showNotification('success', 'å¯¼å…¥æˆåŠŸ', 'å‡ºå‹¤æ•°æ®å·²å¯¼å…¥');
                }
                
                // æ›´æ–°ç•Œé¢
                updateDailySalaryGrid();
                updateDailySalaryPreview();
                updateMonthSalaryStats();
                updateAttendanceCalendar();
                updateAttendanceStats();
                updateAttendanceEmployeeSummary();
                updateSalarySummaryTables();
                updateCalendarView();
                updateCalendarStats();
                
                // æ¸…ç©ºæ–‡ä»¶è¾“å…¥
                event.target.value = '';
            };
            
            reader.readAsText(file, 'UTF-8');
        }
        
        // é‡ç½®æœ¬æœˆæ•°æ®
        function resetCurrentMonthData() {
/*
            if (!confirm(`ç¡®å®šè¦é‡ç½®${currentYear}å¹´${currentMonth + 1}æœˆçš„æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`)) {
                return;
            }
            */
            // è·å–è¯¥æœˆçš„å¤©æ•°
            const daysInMonth = getDaysInMonth(currentYear, currentMonth);
            
            // åˆ é™¤è¯¥æœˆçš„æ¯æ—¥å·¥èµ„è®¾ç½®
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                delete dailySalaries[dateString];
            }
            
            // åˆ é™¤è¯¥æœˆçš„å‡ºå‹¤è®°å½•
            for (let day = 1; day <= daysInMonth; day++) {
                const dateString = formatDate(currentYear, currentMonth, day);
                delete attendanceRecords[dateString];
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveDailySalaries();
            saveAttendanceRecords();
            
            // æ›´æ–°ç•Œé¢
            updateDailySalaryGrid();
            updateDailySalaryPreview();
            updateMonthSalaryStats();
            updateAttendanceCalendar();
            updateAttendanceStats();
            updateAttendanceEmployeeSummary();
            updateSalarySummaryTables();
            updateCalendarView();
            updateCalendarStats();
            
            showNotification('success', 'é‡ç½®æˆåŠŸ', `${currentYear}å¹´${currentMonth + 1}æœˆçš„æ•°æ®å·²é‡ç½®`);
        }
        
        // é‡ç½®æ‰€æœ‰æ•°æ®
        function resetAllData() {
   //showNotification('success', 'é‡ç½®æˆåŠŸ', `${currentYear}å¹´${currentMonth + 1}æœˆçš„æ•°æ®å·²é‡ç½®`);
/*
            if (!confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {

showNotification('success', 'é‡ç½®æˆåŠŸ', `${currentYear}å¹´${currentMonth + 1}æœˆçš„æ•°æ®å·²é‡ç½®`);

                return;
            }

            showNotification('success', 'é‡ç½®æˆåŠŸ', `${currentYear}å¹´${currentMonth + 1}æœˆçš„æ•°æ®å·²é‡ç½®`);

*/
            dailySalaries = {};
            attendanceRecords = {};
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveDailySalaries();
            saveAttendanceRecords();
            
            // æ›´æ–°ç•Œé¢
            updateDailySalaryGrid();
            updateDailySalaryPreview();
            updateMonthSalaryStats();
            updateAttendanceCalendar();
            updateAttendanceStats();
            updateAttendanceEmployeeSummary();
            updateSalarySummaryTables();
            updateCalendarView();
            updateCalendarStats();
            
            showNotification('success', 'æ¸…é™¤æˆåŠŸ', 'æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
        }
        
        // ä¿å­˜ç³»ç»Ÿè®¾ç½®
        function saveSystemSettings() {
            const defaultWeekdaySalary = document.getElementById('defaultWeekdaySalary').value;
            const defaultWeekendSalary = document.getElementById('defaultWeekendSalary').value;
            const defaultHolidaySalary = document.getElementById('defaultHolidaySalary').value;
            
            localStorage.setItem('defaultWeekdaySalary', defaultWeekdaySalary);
            localStorage.setItem('defaultWeekendSalary', defaultWeekendSalary);
            localStorage.setItem('defaultHolidaySalary', defaultHolidaySalary);
            
            showNotification('success', 'è®¾ç½®å·²ä¿å­˜', 'ç³»ç»Ÿè®¾ç½®å·²ä¿å­˜');
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(type, title, message) {
            // ç§»é™¤ç°æœ‰é€šçŸ¥
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            // åˆ›å»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            // è®¾ç½®å›¾æ ‡
            let icon = 'â„¹ï¸';
            if (type === 'success') icon = 'âœ…';
            else if (type === 'error') icon = 'âŒ';
            else if (type === 'warning') icon = 'âš ï¸';
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">
                        <span>${icon}</span>
                        ${title}
                    </div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">&times;</button>
                </div>
                <div>${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            // 5ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // è·å–éšæœºé¢œè‰²
        function getRandomColor() {
            const colors = [
                '#4b6cb7', '#3498db', '#2ecc71', '#f39c12',
                '#9b59b6', '#1abc9c', '#e74c3c', '#34495e',
                '#d35400', '#7f8c8d'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }
    </script>
</body>
</html>